/* Bootstrap CSS */
@import 'bootstrap/dist/css/bootstrap.min.css';

/* FullCalendar CSS is included in the JS modules themselves (v6+) */

/*
 * This is a manifest file that'll be compiled into application.css.
 *
 * With Propshaft, assets are served efficiently without preprocessing steps. You can still include
 * application-wide styles in this file, but keep in mind that CSS precedence will follow the standard
 * cascading order, meaning styles declared later in the document or manifest will override earlier ones,
 * depending on specificity.
 *
 * Consider organizing styles into separate files for maintainability.
 */

/* ========================================
   Bootstrap Theme Customization
   ======================================== */

:root {
  /* Brand Colors - Gardening/Seedling Theme */
  --bs-primary: #1e4d3a;        /* Dark forest green - navbar and primary actions */
  --bs-primary-rgb: 30, 77, 58;

  --bs-secondary: #52b788;      /* Light green - secondary elements */
  --bs-secondary-rgb: 82, 183, 136;

  --bs-success: #2d6a4f;        /* Forest green */
  --bs-success-rgb: 45, 106, 79;

  --bs-info: #74c69d;           /* Info light green */
  --bs-info-rgb: 116, 198, 157;

  --bs-warning: #f4a261;        /* Warning orange */
  --bs-warning-rgb: 244, 162, 97;

  --bs-danger: #e76f51;         /* Danger red */
  --bs-danger-rgb: 231, 111, 81;

  /* Spacing */
  --bs-spacer: 1rem;

  /* Border radius - softer corners */
  --bs-border-radius: 0.5rem;
  --bs-border-radius-sm: 0.375rem;
  --bs-border-radius-lg: 0.75rem;

  /* Font family */
  --bs-body-font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}

/* ========================================
   Custom Component Overrides
   ======================================== */

/* Ensure good contrast for buttons */
.btn-primary,
.btn-secondary {
  color: white;
}

/* Readable table text */
.table {
  font-size: 0.95rem;
}

/* Bold navbar brand */
.navbar-brand {
  font-weight: 600;
}

/* ========================================
   Custom Badge Colors
   ======================================== */

/* Darker watermelon pink badge */
.badge.bg-pink {
  background-color: #c91f5d !important;
  color: white;
}

/* Deep blue badge (to differentiate from green) */
.badge.bg-blue {
  background-color: #1e4d7a !important;
  color: white;
}

/* Sowing Method Colors */
.badge.bg-orange {
  background-color: #9d4a18 !important;
  color: white;
}

.badge.bg-purple {
  background-color: #5b21b6 !important;
  color: white;
}

.badge.bg-teal {
  background-color: #0a6b61 !important;
  color: white;
}

/* ========================================
   Navbar Improvements
   ======================================== */

/* Higher contrast for unselected navbar links */
.navbar-nav .nav-link {
  color: rgba(255, 255, 255, 0.85) !important;
  font-weight: 500;
}

.navbar-nav .nav-link:hover {
  color: rgba(255, 255, 255, 1) !important;
}

/* Active/selected tab stands out more */
.navbar-nav .nav-link.active {
  color: white !important;
  font-weight: 600;
  background-color: rgba(255, 255, 255, 0.15);
  border-radius: 0.25rem;
}

/* ========================================
   Calendar Customizations
   ======================================== */

.fc {
  font-family: var(--bs-body-font-family);
}

.fc-event {
  cursor: pointer;
}

.fc-daygrid-event {
  white-space: normal;
}

/* Navigation Arrow Buttons - Make them bigger and clearer */
.fc-prev-button,
.fc-next-button {
  min-width: 50px !important;
  height: 38px !important;
  padding: 0 !important;
  font-size: 1.5rem !important;
  font-weight: 700 !important;
  margin: 0 0.25rem !important;
  line-height: 1 !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Hide the default FullCalendar icons */
.fc-prev-button .fc-icon,
.fc-next-button .fc-icon {
  display: none !important;
}

/* Add clear arrow symbols */
.fc-prev-button::before {
  content: "<" !important;
  font-size: 1.5rem !important;
  font-weight: 700 !important;
}

.fc-next-button::before {
  content: ">" !important;
  font-size: 1.5rem !important;
  font-weight: 700 !important;
}

@media (max-width: 768px) {
  .fc-toolbar {
    flex-direction: column;
    gap: 0.5rem;
  }

  .fc-toolbar-chunk {
    width: 100%;
    justify-content: center;
  }
}

/* ========================================
   Frost Date Marker
   ======================================== */

/* Frost date background event - just for shading/border */
.fc .frost-date-event {
  background-color: rgba(178, 223, 219, 0.35);
  box-shadow: inset 0 0 0 2px rgba(128, 203, 196, 0.8);
  pointer-events: none;
}

/* Ensure day cells can position absolute children */
.fc .fc-daygrid-day-frame {
  position: relative;
}

/* Frost date label injected via dayCellDidMount */
.fc .frost-date-tag {
  position: absolute;
  top: 2px;
  left: 2px;
  font-size: 0.65rem;
  font-weight: 700;
  color: #111;
  background: rgba(255, 255, 255, 0.85);
  padding: 1px 4px;
  border-radius: 4px;
  z-index: 6;
  pointer-events: none;
  line-height: 1.2;
}

/* Year view adjustments - make more compact */
.fc-multimonth-view .frost-date-tag {
  font-size: 0.6rem;
}

/* Actions header - desktop width */
.tasks-table .actions-header {
  width: 180px;
}

/* Mobile Responsive Tables */
@media (max-width: 767px) {
  /* Actions header - mobile width */
  .tasks-table .actions-header {
    width: auto !important;
  }
  /* Task Actions - Stack checkboxes vertically */
  .task-actions-mobile {
    flex-direction: column !important;
    gap: 0.5rem !important;
    align-items: flex-start !important;
    white-space: normal !important;
  }

  /* Plant Actions - Stack buttons vertically */
  .plant-actions-mobile {
    flex-direction: column !important;
  }

  .plant-actions-mobile .btn {
    width: 100% !important;
  }

  /* Plants show page - Bottom buttons stack */
  .plant-bottom-actions-mobile {
    flex-direction: column !important;
  }

  .plant-bottom-actions-mobile .btn {
    width: 100% !important;
  }

  /* Prevent actions column from forcing horizontal scroll */
  .table-responsive td:first-child {
    min-width: auto !important;
  }

  /* Tasks table - Reorder columns for mobile */
  .tasks-table thead tr,
  .tasks-table tbody tr {
    display: flex !important;
  }

  /* Reorder columns: Date, Notes, Actions, Task, Plant */
  /* Date column - first on mobile (nth-child 1) */
  .tasks-table thead tr th:nth-child(1),
  .tasks-table tbody tr td:nth-child(1) {
    order: 1;
    flex: 0 0 75px;
    min-width: 75px;
  }

  /* Notes column - second on mobile (nth-child 4) */
  .tasks-table thead tr th:nth-child(4),
  .tasks-table tbody tr td:nth-child(4) {
    order: 2;
    flex: 0 0 180px;
    min-width: 180px;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  /* Actions column - third on mobile (nth-child 5) */
  .tasks-table thead tr th:nth-child(5),
  .tasks-table tbody tr td:nth-child(5) {
    order: 3;
    flex: 0 0 65px;
    min-width: 65px;
    max-width: 65px;
    padding: 0.25rem !important;
  }

  /* Make checkboxes more compact on mobile */
  .tasks-table .task-actions-mobile {
    gap: 0.25rem !important;
  }

  .tasks-table .form-check {
    margin: 0 !important;
    padding: 0 !important;
  }

  .tasks-table .form-check-input {
    margin: 0 !important;
  }

  .tasks-table .form-check-label {
    padding-left: 0.25rem !important;
  }

  /* Task column - fourth on mobile (nth-child 2) */
  .tasks-table thead tr th:nth-child(2),
  .tasks-table tbody tr td:nth-child(2) {
    order: 4;
    flex: 0 0 auto;
    min-width: 120px;
  }

  /* Plant column - fifth on mobile (nth-child 3) */
  .tasks-table thead tr th:nth-child(3),
  .tasks-table tbody tr td:nth-child(3) {
    order: 5;
    flex: 1;
    min-width: 100px;
  }

  /* Stack date ranges vertically on mobile */
  .task-date-range {
    display: flex !important;
    flex-direction: column !important;
  }

  .task-date-start {
    display: block !important;
  }

  .task-date-end {
    display: block !important;
  }
}

/* ========================================
   Task Page Tab Navigation
   ======================================== */

/* Tab buttons */
.task-tab {
  min-width: 120px;
  border-radius: 8px 8px 0 0;
}

.task-tab-active {
  /* Uses Bootstrap bg-success and text-white classes */
}

.task-tab-inactive {
  border-bottom: none !important;
  /* Uses Bootstrap bg-light, text-muted, and border classes */
}

/* Main content area below tabs */
.task-content-container {
  border-radius: 0 8px 8px 8px;
  margin-top: -4px;
}

/* New Task button color */
.btn-new-task {
  background-color: #82D305;
}

.btn-new-task:hover {
  background-color: #6fb304;
}

/* ========================================
   Task Status Styling
   ======================================== */

/* Pending tasks - default state */
.task-pending {
  /* No special styling for pending */
}

/* Completed tasks - strikethrough and subtle green tint */
.task-done {
  background-color: rgba(45, 106, 79, 0.05) !important;
}

.task-done td:not(:first-child) {
  text-decoration: line-through;
  opacity: 0.7;
}

/* Skipped tasks - muted/faded appearance */
.task-skipped {
  background-color: rgba(108, 117, 125, 0.05) !important;
}

.task-skipped td:not(:first-child) {
  opacity: 0.5;
  font-style: italic;
}

/* Checkbox styling */
.form-check-input {
  width: 1.25em;
  height: 1.25em;
  border: 2px solid #495057;
  border-radius: 0.25em;
  vertical-align: middle;
  margin-top: 0;
}

.form-check-inline {
  display: inline-flex;
  align-items: center;
}

.form-check-input:disabled {
  cursor: not-allowed;
  opacity: 0.3;
}

.form-check-input:not(:disabled) {
  cursor: pointer;
}

.form-check-input:checked {
  background-color: #2d6a4f;
  border-color: #2d6a4f;
}

.form-check-label {
  cursor: pointer;
  font-weight: 900;
  font-size: 1.3rem;
  user-select: none;
  margin-left: 0.25rem;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
}

/* Green checkmark label */
.form-check-label.text-success {
  color: #2d6a4f !important;
  line-height: 1.25em;
}

/* Gray skip label */
.form-check-label.text-secondary {
  color: #495057 !important;
  line-height: 1.25em;
  position: relative;
  top: -0.1em;
}

/* Status badge sizing */
.task-status-badge {
  font-size: 0.75rem;
  padding: 0.25em 0.5em;
}

/* Hover effect for interactive checkboxes */
.form-check-input:not(:disabled):hover {
  box-shadow: 0 0 0 0.2rem rgba(45, 106, 79, 0.25);
  border-color: #2d6a4f;
}

/* Make sure Actions column content doesn't wrap */
td .d-flex.gap-2 {
  white-space: nowrap;
}
